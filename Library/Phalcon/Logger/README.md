Phalcon\Logger\Adapter
======================

Usage examples of the adapters available here:

Database
--------
Adapter to store logs in a database table:

```php

/**
 * Logger service utilizes Database Adapter for storing logs
 *
 */
$di->set('logger', function () use ($di) {

    $logger = new \Library\Logger\Adapter\Database('t_log', $di->get('db'));

    // OR use it like this
    // $logger = new \Library\Logger\Adapter\Database('t_log');
    // $logger->setDb($di->get('db'));

    return $logger;
}, true);

```

The following table is used to store the logs:

```sql
CREATE TABLE `t_log` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(20) NOT NULL COMMENT 'name of the log: notice, error, warning, etc',
  `type` tinyint(3) unsigned NOT NULL COMMENT 'integer code for the log record generated (Logger abstract class)',
  `description` varchar(255) NOT NULL COMMENT 'short description of the log generated',
  `created_at` int(10) NOT NULL COMMENT 'timestamp of the time the log record is generated',
  `context` text COMMENT 'added information, where, who, why',
  PRIMARY KEY (`id`),
  KEY `inx_type` (`type`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8
```

Use it as you would normally use logger service.

```php
$this->logger->info('This is info message');
// OR
$this->logger->warning('This is a warning', ['user' => $user]);
```


Firephp
-------
Adapter to send messages to [Firebug](https://getfirebug.com/). You need
the [Firephp](http://www.firephp.org/) extension installed in your browser.

```php
$logger = new Phalcon\Logger\Adapter\Firephp('debug', null);

$logger->log('Plain Message');
$logger->info('Info Message');
$logger->warning('Warn Message');
$logger->error('Error Message');
```

Firelogger
----------
Adapter to send messages to the [Firelogger](http://firelogger.binaryage.com/) console inside the [Firebug](https://getfirebug.com/) in your browser.

```php
$logger = new Phalcon\Logger\Adapter\Firelogger('debug');
$logger->log('Plain Message');
$logger->info('Info Message');
// etc
```

Multiple file logger
--------------------
Adapter Phalcon\Logger\Adapter\File\Multiple can be used to log messages to multiple files. This is similar to the core Phalcon\Logger\Adapter\File adapter with two important distinctions:
* messages are logged into separate files by their log levels
* prefix for log files can be specified, thus allowing us to have separate log files for individual applications in a multi-app project

```php
$logger = new Phalcon\Logger\Adapter\File\Multiple(__DIR__ . '/../logs');
$logger->debug('Hello world');      // this is logged into debug.log
$logger->info('Hello world');       // this is logged into info.log
$logger->warning('Hello world');    // this is logged into warning.log
$logger->error('Hello world');      // this is logged into error.log
$logger->log('Hello world', Phalcon\Logger::CRITICAL);  // this is logged into critical.log

```

### Message grouping by their level

Note that similar-level logs are logged into the same file. The log level groups are defined within the getTypeString() method. You may overload this method to fit your needs:

```php
    private function getTypeString($type)
    {
        switch ($type) {
            case Logger::EMERGENCY:
            case Logger::EMERGENCE:
            case Logger::CRITICAL:
                // emergence, critical
                return 'critical';
            case Logger::ALERT:
            case Logger::ERROR:
                // error, alert
                return 'error';
            case Logger::WARNING:
                // warning
                return 'warning';
            case Logger::NOTICE:
            case Logger::INFO:
                // info, notice
                return 'info';
            case Logger::DEBUG:
            case Logger::CUSTOM:
            case Logger::SPECIAL:
            default:
                // debug, log, custom, special
                return 'debug';
        }
    }
```

Thus, by default both errors and alerts are logged into error.log, and both emergence and critical messages are logged into critical.log, etc.

### Configuration options

Optionally, you may pass configuration options to the logger constructor:

```php
$logger = new Phalcon\Logger\Adapter\File\Multiple(__DIR__ . '/../logs', array(
    'prefix' => 'myapp-',         // filename prefix to all logs generated by this logger. Defaults to "".
    'extension' => 'txt'          // filename extension to all logs generated by this logger. Defaults to "log".
));
```
